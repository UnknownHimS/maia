<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maia's Learning Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: #0a0e27;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        /* Animated space background */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(2px 2px at 20% 30%, white, transparent),
                radial-gradient(2px 2px at 60% 70%, white, transparent),
                radial-gradient(1px 1px at 50% 50%, white, transparent),
                radial-gradient(1px 1px at 80% 10%, white, transparent),
                radial-gradient(2px 2px at 90% 60%, white, transparent),
                radial-gradient(1px 1px at 33% 80%, white, transparent),
                radial-gradient(1px 1px at 15% 75%, white, transparent);
            background-size: 200% 200%;
            animation: twinkle 8s ease-in-out infinite;
            opacity: 0.6;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 0.9; }
        }

        body::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(ellipse at 20% 30%, rgba(138, 43, 226, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 70%, rgba(30, 144, 255, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 40% 80%, rgba(255, 20, 147, 0.1) 0%, transparent 50%);
            animation: drift 20s ease-in-out infinite;
        }

        @keyframes drift {
            0%, 100% { transform: translate(0, 0); }
            33% { transform: translate(5%, 5%); }
            66% { transform: translate(-3%, 3%); }
        }

        .container {
            background: rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(100, 150, 255, 0.3);
            border-radius: 30px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5),
                        0 0 40px rgba(100, 150, 255, 0.1);
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .emoji {
            font-size: 120px;
            margin: 20px 0;
            animation: float 3s ease-in-out infinite;
            filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.3));
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .message {
            font-size: 20px;
            color: #e0e7ff;
            margin: 20px 0;
            line-height: 1.6;
            text-shadow: 0 0 10px rgba(224, 231, 255, 0.3);
        }

        .buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 30px 0;
        }

        button {
            padding: 15px 30px;
            font-size: 18px;
            border: 2px solid rgba(100, 150, 255, 0.5);
            border-radius: 15px;
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.8) 0%, rgba(30, 144, 255, 0.6) 100%);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            box-shadow: 0 5px 15px rgba(30, 144, 255, 0.3);
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(30, 144, 255, 0.5);
            background: linear-gradient(135deg, rgba(30, 58, 138, 1) 0%, rgba(30, 144, 255, 0.8) 100%);
        }

        button:active {
            transform: translateY(0);
        }

        .image-container {
            margin: 20px 0;
        }

        .image-container img {
            max-width: 100%;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(100, 150, 255, 0.3);
        }

        .input-container {
            margin: 20px 0;
        }

        input[type="text"] {
            padding: 15px;
            font-size: 18px;
            border: 2px solid rgba(100, 150, 255, 0.5);
            border-radius: 15px;
            width: 100%;
            max-width: 300px;
            text-align: center;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: rgba(15, 23, 42, 0.6);
            color: #e0e7ff;
            margin-bottom: 10px;
        }

        input[type="text"]::placeholder {
            color: rgba(224, 231, 255, 0.5);
        }

        input[type="text"]:focus {
            outline: none;
            border-color: rgba(30, 144, 255, 1);
            box-shadow: 0 0 15px rgba(30, 144, 255, 0.5);
        }

        .video-container {
            margin: 20px 0;
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            border-radius: 15px;
            border: 2px solid rgba(100, 150, 255, 0.3);
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 15px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="emoji" id="emoji">ðŸ˜Š</div>
        <div class="message" id="message">Hello, Ma'am! Welcome!</div>
        <div class="buttons" id="buttons"></div>
        <div class="image-container hidden" id="imageContainer"></div>
        <div class="video-container hidden" id="videoContainer"></div>
        <div class="input-container hidden" id="inputContainer">
            <input type="text" id="answerInput" placeholder="Type your answer here">
            <button onclick="checkAnswer()">Submit Answer</button>
        </div>
    </div>

<script>
    let mathQuestion = {};
    let speechSynth = window.speechSynthesis;
    let currentUtterance = null;
    let voicesLoaded = false;

    // Load voices
    function loadVoices() {
        return new Promise((resolve) => {
            let voices = speechSynth.getVoices();
            if (voices.length > 0) {
                voicesLoaded = true;
                resolve(voices);
            } else {
                speechSynth.onvoiceschanged = () => {
                    voices = speechSynth.getVoices();
                    voicesLoaded = true;
                    resolve(voices);
                };
            }
        });
    }

    async function speak(text) {
        // Cancel any ongoing speech
        speechSynth.cancel();

        // Wait for voices to load if not loaded yet
        if (!voicesLoaded) {
            await loadVoices();
        }

        currentUtterance = new SpeechSynthesisUtterance(text);
        currentUtterance.rate = 0.9;
        currentUtterance.pitch = 1.3;
        
        // Try to select a female voice
        let voices = speechSynth.getVoices();
        let femaleVoice = voices.find(voice => 
            voice.name.toLowerCase().includes('female') || 
            voice.name.includes('Samantha') ||
            voice.name.includes('Victoria') ||
            voice.name.includes('Zira') ||
            voice.name.includes('Google UK English Female') ||
            voice.name.includes('Microsoft Zira') ||
            voice.name.includes('Karen') ||
            (voice.lang.includes('en') && voice.name.includes('2'))
        );
        
        if (femaleVoice) {
            currentUtterance.voice = femaleVoice;
        }
        
        speechSynth.speak(currentUtterance);
    }

    function setEmoji(emoji) {
        document.getElementById('emoji').textContent = emoji;
    }

    function setMessage(text) {
        document.getElementById('message').textContent = text;
        speak(text);
    }

    function clearButtons() {
        document.getElementById('buttons').innerHTML = '';
    }

    function addButton(text, callback) {
        const btn = document.createElement('button');
        btn.textContent = text;
        btn.onclick = callback;
        document.getElementById('buttons').appendChild(btn);
    }

    function hideElement(id) {
        document.getElementById(id).classList.add('hidden');
    }

    function showElement(id) {
        document.getElementById(id).classList.remove('hidden');
    }

    function getCurrentTime() {
        const now = new Date();
        let hours = now.getHours();
        let minutes = now.getMinutes();
        const ampm = hours >= 12 ? 'PM' : 'AM';
        hours = hours % 12 || 12;
        minutes = minutes < 10 ? '0' + minutes : minutes;
        return `${hours}:${minutes} ${ampm}`;
    }

    function getTimeOfDay() {
        const hour = new Date().getHours();
        
        // Sleep Time: 10 PM - 12 AM and 5 AM - 1 AM
        if (hour >= 22 || hour < 1 || (hour >= 5 && hour < 10)) return 'sleep';
        
        // Lunch Time: 1 AM - 5 AM
        if (hour >= 1 && hour < 5) return 'lunch';
        
        // Reading Time: 3 AM - 4 AM
        if (hour >= 3 && hour < 4) return 'reading';
        
        return 'other';
    }

    // Lunch Time
    function handleLunchTime() {
        setEmoji('ðŸ½ï¸');
        const time = getCurrentTime();
        setMessage(`Hello, Ma'am! The time is ${time}. It's lunch time. If you haven't eaten yet, go enjoy your food and be thankful.`);
        clearButtons();
        setTimeout(() => {
            addButton('Not yet', handleNotYet);
            addButton('I already ate', handleAlreadyAte);
        }, 1000);
    }

    // Reading Time
    function handleReadingTime() {
        setEmoji('ðŸ“š');
        const time = getCurrentTime();
        setMessage(`Hello, Ma'am! It's ${time}! It's time to practice reading now. Grab your book and read for a few minutes so your brain stays strong!`);
        clearButtons();
        setTimeout(() => {
            addButton('Start Reading Session', startReadingSession);
        }, 2000);
    }

    function startReadingSession() {
        setEmoji('ðŸ“–');
        setMessage("Great! Reading makes you smarter every day. Take your time and enjoy your book!");
        clearButtons();
        setTimeout(() => {
            proceedToBehavior();
        }, 3000);
    }

    function handleNotYet() {
        setEmoji('ðŸ˜¢');
        clearButtons();
        const imgContainer = document.getElementById('imageContainer');
        imgContainer.innerHTML = '<img src="https://images.unsplash.com/photo-1488521787991-ed7bbaae773c?w=400&q=80" alt="Hungry child">';
        showElement('imageContainer');
        setMessage("She is hungry, but you have food. Now go eat and be grateful!");
        setTimeout(() => {
            hideElement('imageContainer');
            setEmoji('ðŸ˜Š');
            setMessage("Enjoy your meal!");
            setTimeout(() => {
                proceedToBehavior();
            }, 3000);
        }, 6000);
    }

    function handleAlreadyAte() {
        setEmoji('ðŸ˜„');
        setMessage("That's good!");
        clearButtons();
        setTimeout(() => {
            setEmoji('ðŸŽ®');
            setMessage("What would you like to do now?");
            addButton('ðŸŽµ Soda Pop (YouTube)', showSodaPop);
            addButton('ðŸ§  Random Facts', showRandomFact);
            addButton('ðŸŽ¯ Let\'s Play Math!', startMathGame);
        }, 2000);
    }

    function showSodaPop() {
        clearButtons();
        setEmoji('ðŸŽµ');
        const videoContainer = document.getElementById('videoContainer');
        videoContainer.innerHTML = '<iframe src="https://www.youtube.com/embed/gPbh6Ru7VVM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>';
        showElement('videoContainer');
        setMessage("Enjoy the music! Dance along if you want!");
        setTimeout(() => {
            addButton('Continue', () => {
                hideElement('videoContainer');
                proceedToBehavior();
            });
        }, 3000);
    }

    function showRandomFact() {
        const facts = [
            "Did you know? Honey never spoils!",
            "A group of flamingos is called a 'flamboyance'!",
            "Butterflies taste with their feet!",
            "An octopus has three hearts!",
            "Bananas are berries, but strawberries aren't!",
            "A baby elephant can weigh up to 200 pounds when it's born!",
            "The shortest war in history lasted only 38 minutes!",
            "Some cats are allergic to humans!",
            "A snail can sleep for 3 years!",
            "Dolphins have names for each other!",
            "The Great Wall of China is so long, it could wrap around the Earth more than 5 times!",
            "Your nose can remember 50,000 different smells!",
            "A hummingbird's heart beats more than 1,000 times per minute!",
            "Polar bears have black skin under their white fur!"
        ];
        const randomFact = facts[Math.floor(Math.random() * facts.length)];
        setEmoji('ðŸ¤“');
        setMessage(randomFact);
        clearButtons();
        setTimeout(() => {
            addButton('Tell me another fact!', showRandomFact);
            addButton('Let\'s do something else', handleAlreadyAte);
        }, 3000);
    }

    function startMathGame() {
        setEmoji('ðŸŽ®');
        clearButtons();
        const operations = [
            { a: 5, b: 5, op: '+', answer: 10, display: '5 + 5' },
            { a: 3, b: 2, op: 'Ã—', answer: 6, display: '3 Ã— 2' },
            { a: 10, b: 2, op: '-', answer: 8, display: '10 - 2' },
            { a: 8, b: 4, op: '+', answer: 12, display: '8 + 4' },
            { a: 7, b: 3, op: '-', answer: 4, display: '7 - 3' },
            { a: 4, b: 3, op: 'Ã—', answer: 12, display: '4 Ã— 3' },
            { a: 6, b: 2, op: 'Ã—', answer: 12, display: '6 Ã— 2' },
            { a: 15, b: 5, op: '-', answer: 10, display: '15 - 5' },
            { a: 9, b: 3, op: '+', answer: 12, display: '9 + 3' },
            { a: 2, b: 4, op: 'Ã—', answer: 8, display: '2 Ã— 4' }
        ];
        mathQuestion = operations[Math.floor(Math.random() * operations.length)];
        setMessage(`Let's play math! What is ${mathQuestion.display}?`);
        showElement('inputContainer');
        document.getElementById('answerInput').focus();
    }

    function checkAnswer() {
        const userAnswer = parseInt(document.getElementById('answerInput').value);
        if (userAnswer === mathQuestion.answer) {
            setEmoji('ðŸŽ‰');
            setMessage(`Correct! ${mathQuestion.display} = ${mathQuestion.answer}! You're so smart!`);
            hideElement('inputContainer');
            document.getElementById('answerInput').value = '';
            clearButtons();
            setTimeout(() => {
                addButton('Play Again!', startMathGame);
                addButton('Continue', proceedToBehavior);
            }, 2000);
        } else {
            setEmoji('ðŸ¤”');
            setMessage(`Not quite! Try again. What is ${mathQuestion.display}?`);
            document.getElementById('answerInput').value = '';
            document.getElementById('answerInput').focus();
        }
    }

    function proceedToBehavior() {
        hideElement('inputContainer');
        hideElement('videoContainer');
        setEmoji('ðŸ¤”');
        setMessage("If you want something from your parents, what will you do?");
        clearButtons();
        setTimeout(() => {
            addButton('ðŸ˜¡ Get angry and shout at them', handleShout);
            addButton('ðŸ˜Š Say please, can you get me something?', handlePolite);
        }, 1000);
    }

    function handleShout() {
        setEmoji('ðŸ˜”');
        setMessage("Oh no! Shouting isn't kind. Let's be patient and polite.");
        clearButtons();
        setTimeout(() => {
            setEmoji('ðŸ’•');
            setMessage("Being kind and respectful is always better!");
            setTimeout(() => {
                addButton('I understand now', showFinalMessage);
            }, 3000);
        }, 5000);
    }

    function handlePolite() {
        setEmoji('ðŸŒŸ');
        setMessage("Excellent! Being polite makes everyone happy.");
        clearButtons();
        setTimeout(() => {
            addButton('Thank you, Maia!', showFinalMessage);
        }, 3000);
    }

    function showFinalMessage() {
        setEmoji('ðŸ˜Š');
        setMessage("You did great today! Eat well, sleep on time, read, and always be kind!");
        clearButtons();
        setTimeout(() => {
            addButton('Start Over', init);
        }, 3000);
    }

    async function init() {
        hideElement('inputContainer');
        hideElement('videoContainer');
        hideElement('imageContainer');
        clearButtons();
        await loadVoices();
        const timeOfDay = getTimeOfDay();
        switch(timeOfDay) {
            case 'sleep':
                setEmoji('ðŸ˜´');
                setMessage("Hello, Ma'am! It's sleep time. Rest well!");
                break;
            case 'lunch':
                handleLunchTime();
                break;
            case 'reading':
                handleReadingTime();
                break;
            default:
                setEmoji('ðŸ˜Š');
                const time = getCurrentTime();
                setMessage(`Hello, Ma'am! Welcome! The time is ${time}. Have a wonderful day!`);
                setTimeout(() => {
                    addButton('Let\'s Start Learning!', handleLunchTime);
                }, 2000);
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        const input = document.getElementById('answerInput');
        input.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') checkAnswer();
        });
    });

    window.onload = init;
</script>

</body>
</html>
